(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[373],{484:(e,s,t)=>{Promise.resolve().then(t.bind(t,59428))},59428:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>o});var n=t(95155),r=t(41411),a=t(48173),i=t.n(a);function o(){return(0,n.jsxs)("main",{className:"relative min-h-screen bg-cover bg-center bg-no-repeat bg-fixed flex justify-center items-start py-20 px-4",style:{backgroundImage:"url('/images/bg-home.png')"},children:[(0,n.jsxs)("div",{className:"w-full max-w-4xl bg-black/80 text-white p-10 rounded-xl shadow-md",children:[(0,n.jsx)(i(),{href:"/",className:"text-sm text-gray-400 hover:text-white transition block mb-4",children:"← Back to Home"}),(0,n.jsx)("h1",{className:"text-4xl font-bold text-ember mb-2",children:"Custom RAG: Lightweight Retrieval Without a Vector DB"}),(0,n.jsx)("p",{className:"mb-6 leading-relaxed",children:"Most Retrieval-Augmented Generation (RAG) systems lean on vector databases like FAISS, Pinecone, or Supabase with pgvector. But in real use, these often bring more pain than value:"}),(0,n.jsxs)("ul",{className:"list-disc list-inside space-y-2 text-gray-400 leading-relaxed mb-6",children:[(0,n.jsx)("li",{children:"High memory usage even for small indexes"}),(0,n.jsx)("li",{children:"Latency spikes due to IO or over-threading"}),(0,n.jsx)("li",{children:"Complexity with persistence, scaling, and API setup"}),(0,n.jsx)("li",{children:"External dependencies that break portability and debugging"}),(0,n.jsx)("li",{children:"Voyager setups can use gigabytes for context trees"}),(0,n.jsx)("li",{children:"Network latency for cloud vector search often exceeds 2 seconds"})]}),(0,n.jsxs)("p",{className:"mb-6 leading-relaxed",children:["So I built a minimal alternative. One that runs entirely in memory, stays fast on CPU, and doesn’t require anything beyond ",(0,n.jsx)("code",{children:"numpy"})," and cosine similarity."]}),(0,n.jsx)("h2",{className:"text-2xl font-bold text-ember mb-2",children:"⚙️ Step 1: Prepare Sentences and Embeddings"}),(0,n.jsx)("p",{className:"mb-6 leading-relaxed",children:"Start with a list of sentences. You can embed all at once using the SentenceTransformer model:"}),(0,n.jsx)(r.A,{language:"python",code:'from sentence_transformers import SentenceTransformer\nimport numpy as np\n\nsentences = [\n  "Reinforcement learning uses rewards to guide actions.",\n  "Transformers predict sequences token by token.",\n  "Backpropagation updates weights in neural networks.",\n  "Cosine similarity measures vector direction overlap."\n]\n\nmodel = SentenceTransformer("all-MiniLM-L6-v2")\nemb_matrix = model.encode(sentences)  # efficient batch embedding'}),(0,n.jsx)("h2",{className:"text-2xl font-bold text-ember mb-2",children:"\uD83D\uDCBE Memory Footprint"}),(0,n.jsxs)("p",{className:"mb-6 leading-relaxed",children:["Each 384-dim vector with float32 takes 384 * 4 = 1536 bytes (1.5 KB). So 100,000 vectors ≈ ",(0,n.jsx)("strong",{children:"150 MB"}),"."]}),(0,n.jsx)("h2",{className:"text-2xl font-bold text-ember mb-2",children:"\uD83D\uDD0D Step 2: Search With Cosine Similarity"}),(0,n.jsx)("p",{className:"mb-6 leading-relaxed",children:"At query time, encode the input and compare with all vectors using brute-force cosine similarity:"}),(0,n.jsx)(r.A,{language:"python",code:'from sklearn.metrics.pairwise import cosine_similarity\n\nquery = "What is backpropagation?"\nquery_vec = model.encode([query])[0]\nscores = cosine_similarity([query_vec], emb_matrix)[0]\n\n# Threshold or top-k filtering\nthreshold = 0.5\nindices = np.where(scores > threshold)[0]\n# OR: indices = scores.argsort()[-10:][::-1]\n\n# Fetch matching sentences\nresults = [sentences[i] for i in indices]'}),(0,n.jsx)("h2",{className:"text-2xl font-bold text-ember mb-2",children:"\uD83D\uDCC8 Final Result"}),(0,n.jsxs)("ul",{className:"list-disc list-inside space-y-2 text-gray-400 leading-relaxed mb-6",children:[(0,n.jsx)("li",{children:"~200ms latency for 100k records on CPU"}),(0,n.jsx)("li",{children:"Total memory under 200 MB with float32"}),(0,n.jsx)("li",{children:"Zero infra, zero disk, fully in-memory"}),(0,n.jsx)("li",{children:"Faster and leaner than Voyager/FAISS/Pinecone for most personal use-cases"})]}),(0,n.jsx)("p",{className:"mb-6 leading-relaxed",children:"For local apps, embedded systems, or fast prototyping — this method is more than enough. No setup. No permission errors. Just pure speed."}),(0,n.jsx)("p",{className:"mb-6 leading-relaxed",children:"\uD83E\uDDE0 Want more scale? Replace the brute-force search with a smarter index later. The logic stays the same."}),(0,n.jsx)("p",{className:"mb-4 leading-relaxed",children:"One common optimization is to pre-group data by topic or category, so you can filter early before running similarity search."}),(0,n.jsx)(r.A,{language:"python",code:'category_map = {\n  "RL": ["Reinforcement learning uses rewards to guide actions.", ...],\n  "NLP": ["Transformers predict sequences token by token.", ...],\n  "Math": ["Cosine similarity measures vector direction overlap.", ...]\n}'}),(0,n.jsx)("p",{className:"mb-6 leading-relaxed",children:"At search time, you can first classify or filter the query into a relevant category (like RL, NLP, Math), and only run cosine similarity on that smaller subset. This reduces both memory access and comparison cost. If you're working with 100,000 records across 100 categories, you may only need to search over ~1,000 records per query — making retrieval almost instant."})]}),(0,n.jsx)("button",{onClick:()=>window.scrollTo({top:0,behavior:"smooth"}),className:"fixed bottom-6 right-6 z-50 bg-ember text-black px-4 py-2 rounded-full shadow-lg hover:bg-orange-400 transition",children:"↑ Top"})]})}},41411:(e,s,t)=>{"use strict";t.d(s,{A:()=>o});var n=t(95155),r=t(64566),a=t(51263),i=t(12115);function o(e){let{code:s,language:t="text"}=e,[o,l]=(0,i.useState)(!1);return(0,n.jsxs)("div",{className:"relative mb-6 rounded-lg overflow-hidden",children:[(0,n.jsx)("span",{className:"absolute top-2 left-2 text-xs text-gray-300 px-2 py-0.5 rounded",children:t}),(0,n.jsx)("button",{onClick:()=>{navigator.clipboard.writeText(s),l(!0),setTimeout(()=>l(!1),1500)},className:"absolute top-2 right-2 text-xs text-black bg-ember px-2 py-1 rounded hover:bg-orange-500 transition z-10",children:o?"Copied!":"Copy"}),(0,n.jsx)(r.A,{language:t,style:a.hc,showLineNumbers:!0,customStyle:{padding:"1.75rem 1.25rem 0.25rem 1.25rem",fontSize:"0.9rem",background:"transparent"},children:s})]})}}},e=>{var s=s=>e(e.s=s);e.O(0,[932,441,517,358],()=>s(484)),_N_E=e.O()}]);